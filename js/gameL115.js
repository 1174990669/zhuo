;(function(e,t,n,r){
	var i={name:t,jsNameSpace:"caipiaogame.Games.L115."},s,o=e.Games,u={
		init:function(){var e=this;e.eventProxy()},getGameConfig:function(){return o[t].Config}},a=e.Class(u,n);a.defConfig=i,a.getInstance=function(e){return s||(s=new a(e))},e.Games[t]=a})(caipiaogame,"L115",caipiaogame.Game);(function(e,t,n,r){var i=gameConfigData,s={},o={},u={},a;(function(){var e=i.wayGroups,t,n,r;$.each(e,function(){t=this,t.fullname_en=[t.name_en],t.fullname_cn=[t.name_cn],o[""+t.id]=t,t.children&&$.each(t.children,function(){n=this,n.fullname_en=t.fullname_en.concat(n.name_en),n.fullname_cn=t.fullname_cn.concat(n.name_cn),o[""+n.id]=n,n.children&&$.each(n.children,function(){r=this,r.fullname_en=n.fullname_en.concat(r.name_en),r.fullname_cn=n.fullname_cn.concat(r.name_cn),u[""+r.id]=r})})})})();var f={init:function(){var e=this;e.types=gameConfigData.wayGroups},getTypes:function(e){return this.types},getGameId:function(){return i.gameId},getGameNameEn:function(){return i.gameNameEn},getGameNameCn:function(){return i.gameNameCn},getTraceMaxTimes:function(){return Number(i.traceMaxTimes)},getCurrentLastTime:function(){return i.currentNumberTime},getCurrentTime:function(){return i.currentTime},getCurrentGameNumber:function(){return i.currentNumber},getLastGameNumber:function(){var e=i.issueHistory.last_number.issue,t=i.issueHistory.issues[0].issue;return t>e&&(e=t),e},getLotteryBalls:function(){var e=i.issueHistory.last_number.wn_number,t=i.issueHistory.last_number.issue,n=i.issueHistory.issues[0].issue;return n>t&&(e=i.issueHistory.issues[0].wn_number),e||""},getLotteryNumbers:function(){return i.issueHistory.issues||[]},getFormatLotteryNumbers:function(e,t){var n=this,r={};return t=t||n.getLotteryNumbers(),e=e||"hour",$.each(t,function(t,i){var s=n.getKeyByDateStr(""+i.offical_time,e);s&&(r[s]||(r[s]=[]),r[s].push(i))}),r},getKeyByDateStr:function(e,t){e=e||"0",t=t||"hour";var n=new Date;n.setTime(parseInt(e)*1e3);if(Object.prototype.toString.call(n)==="[object Date]"){if(isNaN(n.getTime()))return"";var r=n.getMonth()+1,i=n.getDate(),s=n.getHours(),o=n.getMinutes();return r<10&&(r="0"+r),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),t=="month"?r+"月":t=="day"?r+"月"+i+"日":t=="minute"?s+":"+o:s+":00"}return""},getGameNumbers:function(){return i.gameNumbers},getLimitByMethodId:function(e,t){var t=t||1,n=Number(this.getPrizeById(e).max_multiple);return n/t},getSubmitUrl:function(){return i.submitUrl},getUpdateUrl:function(){return i.loaddataUrl},getUploadPath:function(){return i.uploadPath},getJsPath:function(){return i.jsPath},getDefaultMethodId:function(){return i.defaultMethodId},getUserName:function(){return i.username},getMethods:function(){return i.wayGroups},getMethodById:function(e){return u[""+e]},getPrizeById:function(e){return i.prizeSettings[""+e]},getMethodNodeById:function(e){return o[""+e]},getMethodNameById:function(e){var t=this.getMethodById(e);return t?t.name_en:""},getMethodCnNameById:function(e){var t=this.getMethodById(e);return t?t.name_cn:""},getMethodFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_en:""},getMethodCnFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_cn:""},getOnePriceById:function(e){return Number(this.getMethodById(e).price)},getToken:function(){return i._token},updateConfig:function(e){$.extend(!0,i,e)},getOptionalPrizes:function(){return i.optionalPrizes},setOptionalPrizes:function(){return $("#J-bonus-select-value").val()},getDefaultCoefficient:function(){return i.defaultCoefficient?i.defaultCoefficient:"1"},getDefaultMultiple:function(){return i.defaultMultiple?i.defaultMultiple:"1"},getLoadIssueUrl:function(){return i.loadIssueUrl},getMaxPrizeGroup:function(){return i.maxPrizeGroup},getSubmitCompress:function(){return i.betSubmitCompress},getVideoMp3:function(){return["/assets/img/numberlottery.wav","/assets/img/du.wav"]},getTitleByName:function(e){var t=this,n=e.length,r=e,i=t.types,s=0,o=i.length,u,a,f,l,c=[],h=[];for(;s<o;s++)if(i[s]["name_en"]==r[0]){if(!(n>1&&i[s].children.length>0))return h;c=i[s].children,a=c.length;for(u=0;u<a;u++)if(c[u]["name_en"]==r[1]){if(!(n>2&&c[u].children.length>0))return h;c=c[u].children,l=c.length;for(f=0;f<l;f++)if(c[f]["name_en"]==r[2])return $.inArray(c[f]["name_cn"].replace(/&nbsp;/g,""),h)==-1&&h.push(c[f].name_cn.replace(/&nbsp;/g,"")),h}}return""}},l=e.Class(f,n);l.defConfig=s,l.getInstance=function(e){return a||(a=new l(e))},e.Games.L115[t]=l})(caipiaogame,"Config",caipiaogame.Event);(function(e,t,n,r){var i={name:"wuxing.zhixuan.danshi",editorobj:".content-text-balls",uploadButton:"#file",exampleText:"12345 33456 87898 <br />12345 33456 87898 <br />12345 33456 87898 ",tips:"五星直选单式玩法提示",exampleTip:"这是单式弹出层提示",checkFont:/[\u4E00-\u9FA5]|[/\n]|[/W]/g,filtration:/[；|;]+|[\n\r]+|[,|，]+/g,checkNum:/^\d{2}$/,normalTips:["说明：","1、每一注号码之间的间隔符支持 回车 逗号[,] 分号[;] 冒号[:] 竖线 [|] 每注内间隔使用空格即可。","2、文件格式必须是.txt格式,大小不超过200KB。","3、将文件拖入文本框即可快速实现文件上传,大文件拖拽上传效果更佳。","4、导入文本内容后将覆盖文本框中现有的内容。","5、一次投注支持100,000注！"].join("\n")},s="L115",o=e.Games,u=e.Games[s],a={init:function(e){var t=this;t.ieRange="",t.vData=[],t.aData=[],t.tData=[],t.errorData=[],t.sameData=[],t.firstfocus=!0,t.ranNumTag=!1,t.isFirstAdd=!0,o.getCurrentGameOrder().addEvent("beforeAdd",function(e,n){var r=this,i=t.tData,s="";n["type"]==t.defConfig.name&&(t.isFirstAdd?t.ranNumTag||(n.lotterys=[],t.isFirstAdd=null,t.updateData(),o.getCurrentGameOrder().add(o.getCurrentGameStatistics().getResultData())):((t.errorData.join("")!=""||t.sameData.join("")!="")&&t.ballsErrorTip(),t.isFirstAdd=!0))})},initTextarea:function(){var e=this,t="content-textarea-balls-def",n=e.defConfig,r=$.trim(n.normalTips);e.importTextarea=$('<textarea class="content-textarea-balls '+t+'">'+r+"</textarea>"),e.container.find(".panel-select").html("").append(e.importTextarea),e.importTextarea.focus(function(){var n=$.trim(this.value);n==r&&(this.value="",e.importTextarea.removeClass(t))}).blur(function(){var t=$.trim(this.value);t==""&&(e.removeOrderAll(),e.showNormalTips())}).on("input propertychange",function(t){e.updateData()})},initFrame:function(){var e=this;e.initTextarea(),e.bindPressTextarea(),e.dragUpload()},getExampleText:function(){return this.defConfig.exampleText},rebuildData:function(){var e=this;e.balls=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]]},buildUI:function(){var e=this;e.container.html(e.getHTML())},reSelect:function(){},batchSetBallDom:function(){},getNormalTips:function(){return this.defConfig.normalTips},showNormalTips:function(){var e=this,t="content-textarea-balls-def";e.importTextarea&&e.importTextarea.addClass(t),e.replaceText(e.getNormalTips.call(e))},_bulidEditDom:function(){var e=this,t="";e.doc.designMode="On",e.doc.contentEditable=!0,e.doc.open(),t='<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',t+="<style>*{margin:0;padding:0;font-size:14px;}</style>",t+="</head>",e.doc.writeln("<html>"+t+'<body style="word-break: break-all">'+e.getNormalTips()+"</body></html>"),e.doc.close(),e.bindPress(),document.all&&(e.doc.onkeypress=function(){return e._ieEnter()}),e.dragUpload()},dragUpload:function(){var e=this,t=e.importTextarea;window.FileReader&&(t.bind("dragover",function(e){e.preventDefault(),e.stopPropagation()}),t.get(0).addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation();var n=t.dataTransfer.files,r=n[0],i=new FileReader,s=r.type?r.type:"n/a";if(s!="text/plain")return;i.onload=function(t){var n=t.target.result;$.trim(n)!=""&&(e.replaceText(n),e.firstfocus=!1,e.updateData())},i.readAsText(r)},!1))},_ieEnter:function(){var e=this,t=e.win.event;if(t.keyCode==13)return this._saveRange(),this._insert("<br/>"),!1},_insert:function(e){var t=this;if(!t.ieRange){t.win.focus();if(document.all)t.doc.body.innerHTML+=e;else{var n=win.getSelection(),r=n.getRangeAt(0),i=r.createContextualFragment(e);r.insertNode(i)}}else t.ieRange.pasteHTML(e),t.ieRange.select(),t.ieRange=!1},_saveRange:function(){if(!!document.all&&!me.ieRange){var e=me.doc.selection;me.ieRange=e.createRange();if(e.type!="Control"){var t=me.ieRange.parentElement();if(t.tagName=="INPUT"||t==document.body)me.ieRange=!1}}},getHtml:function(){var e=this,t=e.importTextarea?e.importTextarea.val():"";return t},replaceText:function(e){var t=this;t.importTextarea&&t.importTextarea.val(e)},bindPressTextarea:function(){var e=this,t=e.container.find(e.defConfig.uploadButton),n=window.navigator.userAgent.toLowerCase();t.bind("change",function(){var t=$(this).parent();e.checkFile(this,t)})},bindPress:function(){var e=this,t=e.container.find(e.defConfig.uploadButton),n=window.navigator.userAgent.toLowerCase();$(e.doc).bind("input",function(){e.updateData()}),n.indexOf("msie")>0&&($(e.doc.body).bind("keyup",function(){e.updateData()}),$(e.doc.body).bind("blur",function(){e.updateData()})),$(e.doc).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc).bind("blur",function(){var t=e.getText();$.trim(t)==""?e.showNormalTips():e.updateData()}),$(e.doc.body).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc.body).bind("blur",function(){var t=e.getText();$.trim(t)==""?e.showNormalTips():e.updateData()}),t.bind("change",function(){var t=$(this).parent();e.checkFile(this,t)})},iterator:function(e){var t=this,n=t.defConfig,r=[],i=0;for(var s=0;s<e.length;s++)n.filtration.test(e.charAt(s))&&(r.push(e.substr(i,s-i)),i=s+1);return r},checkResult:function(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].join("")==e.join(""))return!1;return!0},checkBallGroup:function(e){for(var t=e.length-1;t>=0;t--)if(e[t]<1&&e[t]>11)return!0;return!1},checkArrayInnerSame:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},checkSingleNum:function(e){var t=this,n=!0;return $.each(e,function(){if(!t.defConfig.checkNum.test(this))return n=!1,!1}),n},filterLotters:function(e){var t=this,n="";return n=e.replace(/|&nbsp;+|\s+/g,""),n=n.replace(/<(?:"[^"]*"|'[^']*'|[^>'"]*)+>/g,","),n=n.replace(t.defConfig.checkFont,"")+",",n=n.replace(/[,;，；:：|]+/gi,","),n},checkBallIsComplete:function(e){var t=this,n=0,r=[];t.aData=[],t.vData=[],t.sameData=[],t.errorData=[],t.tData=[],r=t.iterator(e);for(;n<r.length;n++)t.checkSingleNum(r[n])?(t.checkResult(r[n],t.tData)?t.tData.push(r[n]):t.checkResult(r[n],t.sameData)&&t.sameData.push(r[n]),t.vData.push(r[n])):t.checkResult(r[n],t.errorData)&&t.errorData.push(r[n]),t.checkResult(r[n],t.aData)&&t.aData.push(r[n]);return t.tData.length>0?(t.isBallsComplete=!0,t.isFirstAdd?t.vData:t.tData):(t.isBallsComplete=!1,[])},iterator:function(e){var t=this,n=t.defConfig,r,i=[],s=[];return e=$.trim(e),e=e.replace(n.filtration,"|"),e=e.replace(/\s+/g," "),e=$.trim(e),s=e.split("|"),$.each(s,function(e){r=$.trim(this),r!=""&&i.push(r.split(" "))}),i},countInstances:function(e,t){var n=[],r=0;do r=e.indexOf(t,r),r!=-1&&(n.push(r),r+=t.length);while(r!=-1);return n},removeOrderError:function(){var e=this,t=[],n=0,r=e.tData.length;for(n=0;n<r;n++)t[n]=e.tData[n].join(" ");t=$.trim(t.join("|")),e.errorDataTips(),e.replaceText(t),e.errorData=[],e.sameData=[],t==""&&e.showNormalTips()},removeOrderSame:function(){var e=this,t=[],n=0,r=e.tData.length;for(n=0;n<r;n++)t[n]=e.tData[n].join(" ");t=$.trim(t.join("|")),e.sameDataTips(),e.replaceText(t),e.errorData=[],e.sameData=[],t==""&&e.showNormalTips()},removeOrderAll:function(){var e=this;e.replaceText(" "),e.sameData=[],e.aData=[],e.tData=[],e.vData=[],o.getCurrentGameStatistics().reSet(),e.showNormalTips()},checkFile:function(e,t){var n=e.value,r=n.substring(n.lastIndexOf("."),n.length),r=r.toLowerCase();if(n=="")return;if(r!=".txt")return alert("对不起，导入数据格式必须是.txt格式文件哦，请您调整格式后重新上传，谢谢 ！"),!1;t[0].submit()},getFile:function(e){var t=this,n=t.container.find(":reset");if(!e)return;t.replaceText(e),t.firstfocus=!1,t.updateData(),n.click()},errorTip:function(e,t){var n=this,r,i,s=[]},sameDataTips:function(){var e=this,t=e.sameData,n="",r="",i=o.getCurrentGameMessage(),s=[];if(t.join("")=="")return;n='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+t.join(", ")+"</p>",i.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+n+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})},errorDataTips:function(){var e=this,t=e.errorData,n="",r="",i=o.getCurrentGameMessage(),s=[];if(t.join("")=="")return;n='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+t.join(", ")+"</p>",i.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+n+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})},ballsErrorTip:function(e,t){var n=this,r=n.errorData,i=n.sameData,s="",u="",a="",f="",l=o.getCurrentGameMessage(),c=[];i.join("")!=""&&(u='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+i.join(", ")+"</p>"),r.join("")!=""&&(s='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+r.join(", ")+"</p>"),l.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+u+s+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})},reSet:function(){var e=this;e.isBallsComplete=!1,e.rebuildData(),e.updateData(),e.ranNumTag||e.showNormalTips(),e.removeRanNumTag()},formatViewBalls:function(e){return this.makePostParameter(e)},makePostParameter:function(e){var t=this,n=[],r=e.length;while(r--)n[r]=e[r].join(" ");return n.join("|")},getTdata:function(){return this.tData},getLottery:function(){var e=this,t=e.getHtml();return t==""?[]:e.checkBallIsComplete(t)},removeSameNum:function(e){var t=0,n,r=this,i=this.getBallData()[0].length;len=e.length,n=Math.floor(Math.random()*i);for(;t<e.length;t++)if(n==e[t])return arguments.callee.call(r,e);return n},emptySameData:function(){this.sameData=[]},emptyErrorData:function(){this.errorData=[]},addRanNumTag:function(){var e=this;e.ranNumTag=!0,e.emptySameData(),e.emptyErrorData()},removeRanNumTag:function(){this.ranNumTag=!1},getOriginal:function(){return this.getTdata()},createRandomNum:function(){var e=this,t=[],n=e.getBallData().length,r=e.getBallData()[0].length;for(var i=0;i<n;i++){var s=Math.ceil(Math.random()*(r-1));s<10&&(s="0"+s),t[i]=[s]}return t},checkRandomBets:function(e,t){var n=this,r=typeof e=="undefined"?!0:!1,e=e||{},i=[],t=t||0,s=n.getBallData().length,u=n.getBallData()[0].length,a=o.getCurrentGameOrder().getTotal().orders;i=n.createRandomNum();if(Number(t)>Number(n.getRandomBetsNum()))return i;if(r)for(var f=0;f<a.length;f++)if(a[f]["type"]==n.defConfig.name){var l=a[f].original.join("");e[l]=l}return e[i.join("")]?(t++,arguments.callee.call(n,e,t)):i},randomNum:function(){var e=this,t=0,n=[],r,i,s=null,u=e.getBallData(),a=e.defConfig.name,f=[],l=[];return e.addRanNumTag(),n=e.checkRandomBets(),l=n,f=e.combination(l),s={type:o.getCurrentGame().getCurrentGameMethod().getGameMethodName(),original:l,lotterys:f,moneyUnit:o.getCurrentGameStatistics().getMoneyUnit(),multiple:o.getCurrentGameStatistics().getMultip(),onePrice:o.getCurrentGameStatistics().getOnePrice(),num:f.length},s.amountText=o.getCurrentGameStatistics().formatMoney(s.num*s.moneyUnit*s.multiple*s.onePrice),s},getHTML:function(){var e=o.getCurrentGame().getGameConfig().getInstance().getUploadPath(),t=[];return t.push('<div class="number-select-title balls-type-title clearfix"><div class="number-select-link"><a href="#" class="pick-rule">选号规则</a><a href="#" class="win-info">中奖说明</a></div></div>'),t.push('<div class="balls-import clearfix">'),t.push('<form id="form1" name="form1" enctype="multipart/form-data" method="post" action="'+e+'" target="check_file_frame" style="position:relative;padding-bottom:10px;">'),t.push('<input name="betNumber" type="file" id="file" size="40" hidefocus="true" value="导入" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;position:absolute;top:0px; left:0px; width:115px; height:30px;z-index:1;background:#000;cursor: pointer;" />'),t.push('<input type="button" class="btn balls-import-input" style="cursor: pointer;" value="导入注单" onclick=document.getElementById("form1").file.click()>&nbsp;&nbsp;&nbsp;&nbsp;<a style="display:none;" class="balls-example-danshi-tip" href="#">查看标准格式样本</a>'),t.push('<input type="reset" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;width:0px; height:0px;z-index:1;background:#000" />'),t.push('<iframe src="'+e+'" name="check_file_frame" style="display:none;"></iframe>'),t.push("</form>"),t.push('<div class="panel-select" ><iframe style="width:100%;height:100%;border:0 none;background-color:#F9F9F9;" class="content-text-balls"></iframe></div>'),t.push('<div class="panel-btn">'),t.push('<a class="btn remove-error" href="javascript:void(0);">删除错误项</a>'),t.push('<a class="btn remove-same" href="javascript:void(0);">删除重复项</a>'),t.push('<a class="btn remove-all" href="javascript:void(0);">清空文本框</a>'),t.push("</div>"),t.push("</div>"),t.join("")}},f=e.Class(a,n);f.defConfig=i,u[t]=f})(caipiaogame,"Danshi",caipiaogame.GameMethod);(function(e,t,n,r){var i={},s="L115",o=e.Games,u,a={init:function(e){var t=this;o.setCurrentGameMessage(t)}},f=e.Class(a,n);f.defConfig=i,f.getInstance=function(e){return u||(u=new f(e))},e.Games[s][t]=f})(caipiaogame,"Message",caipiaogame.GameMessage);$(function(){caipiaogame.Games.L115.getInstance({jsNameSpace:"caipiaogame.Games.L115."}),caipiaogame.GameTypes.getInstance(),caipiaogame.GameStatistics.getInstance(),caipiaogame.GameOrder.getInstance(),caipiaogame.GameTrace.getInstance(),caipiaogame.GameSubmit.getInstance(),caipiaogame.Games.L115.Message.getInstance();var e=caipiaogame.Games,t=!1,n=e.getCurrentGame().getGameConfig().getInstance(),r=n,i=n.getCurrentGameNumber(),s,o=!1,u=!0,a=new caipiaogame.Tip({cls:"j-ui-tip-alert j-ui-tip-b j-ui-tip-showrule",text:"使用厘模式进行投注，单注注单最小金额为0.02元"}),f=e.getCurrentGame().getGameConfig().getInstance().getSubmitCompress();if(!+$.cookie("gameONPlay")){var l=$.cookie("gameONPlay");l=="1"?($("#onPlay").find("i").removeClass("icon-17").addClass("icon-16"),l=!0):($("#onPlay").find("i").removeClass("icon-16").addClass("icon-17"),l=!1)}else var l=!0;var c=new caipiaogame.Alive({url:"/boughts/mini-window",cache:!1,dataType:"json",method:"get",looptime:1e4}),h=new caipiaogame.MiniWindow({cls:"lottery-board-pop",effectShow:function(){var e=this;e.dom.css({display:"block",left:"50%",marginLeft:-e.dom.outerWidth()/2,top:-e.dom.outerHeight()*2}).animate({top:206})},effectHide:function(){var e=this;e.dom.animate({top:-e.dom.outerHeight()*2},function(){e.dom.hide()})}}),p,d,v=["00","01","02","03","04","05","06","07","08","09","10","11"],m=46,g=46,y=function(e,t){var n=$("#lottery-numbers-board");$("#J-ernie-issue").html(e),t&&t.length?(p||(n.find("[data-lottery-ernie-numbers]").replaceWith(w(t.length)),p=new caipiaogame.Ernie({dom:n.find("li"),height:m,length:v.length,callback:b})),$("#J-lottery-ernie-numbers").show(),$(".J-loading-lottery").hide(),p.start(),p.stop(t)):($("#J-lottery-ernie-numbers").hide(),$(".J-loading-lottery").show())},b=function(){i=n.getCurrentGameNumber(),c.start()},w=function(e){var t=['<ul style="display:none;" id="J-lottery-ernie-numbers" class="lottery-ernie-numbers lottery-ernie-numbers-'+e+'">'];for(var n=0;n<e;n++){var r="<li>";$.each(v,function(e,t){r+="<span>"+t+"</span>"}),r+="</li>",t.push(r)}return t.push("</ul>"),t.join("")},E=function(){var t=this,o=e.getCurrentGame().getGameConfig().getInstance().getVideoMp3()[0];u&&(i=n.getLastGameNumber(),u=!1),$.ajax({url:n.getLoadIssueUrl()+"?"+((Math.random()*9+1)*1e5).toFixed(0),dataType:"JSON",success:function(t){t.issues[0].issue-i>0&&(i=t.issues[0].issue),t["issues"][0]["issue"]==i&&t["issues"][0]["wn_number"]!=""?(s.stop(),r=t,y(t.issues[0].issue,(""+t.issues[0].wn_number).split(" ")),l&&($("#dice-tips-audio").attr("src",o),document.getElementById("dice-tips-audio").play()),gameConfigData.issueHistory.issues=r.issues,e.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend()):y(i)}})},S=function(){var t=n.getCurrentLastTime(),r=n.getCurrentTime(),i=t-r,s=i,o,u,a,f=0,c=0,h=0,p=""+n.getCurrentGameNumber(),d=$(".J-lottery-countdown li em"),v=$("#J-trace-statistics-countdown , .J-trace-statistics-countdown"),m=e.getCurrentGameMessage(),g=e.getCurrentGame().getGameConfig().getInstance().getVideoMp3()[1],y=(new Date).getTime();u=function(){if(s<0){o&&o.stop&&o.stop(),e.getCurrentGame().getServerDynamicConfig(function(){var t=""+n.getCurrentGameNumber(),r,i=2;m.hide(),e.getCurrentGameTrace().autoDeleteTrace(),p!=t&&(m.showTip('<div class="tipdom-cont">已进入第'+t+' 期<h1 class="text-danger" id="J-gamenumber-change-s-num">2</h1></div>'),r=setInterval(function(){$("#J-gamenumber-change-s-num").text(i),i-=1,i<-1&&(clearInterval(r),m.hideTip())},1e3))});return}s<10&&l&&($("#dice-tips-audio").attr("src",g),document.getElementById("dice-tips-audio").play()),a=[],f=Math.floor(s/3600),c=Math.floor(s%3600/60),h=s%60,f=f<10?"0"+f:""+f,c=c<10?"0"+c:""+c,h=h<10?"0"+h:""+h,a.push(f),a.push(c),a.push(h),d.each(function(e,t){$(this).text(a[e])}),v.html(a.join(":")),s=i-Math.ceil(((new Date).getTime()-y)/1e3)},o=new caipiaogame.Timer({time:1e3,fn:u}),$("#J-header-currentNumber").html(p)},x=function(){var e=r.getLastGameNumber(),t=(""+r.getLotteryBalls()).split(" ");return r.getLotteryBalls()==""?s=new caipiaogame.Timer({time:5e3,isNew:!0,fn:E}):y(e,t),!1};S(),x(),e.getCurrentGame().addEvent("changeDynamicConfig",function(e,t){s=new caipiaogame.Timer({time:5e3,isNew:!0,fn:E}),S()}),e.getCurrentGameTypes().addEvent("beforeChange",function(t,n){

			/*J-balls-main-panel*/
var r=$("#J-panel-gameTypes li"),i=$("#J-gametyes-menu-panel"),s=i.find('[data-id="'+n+'"]'),
o,u=e.getCurrentGame().getGameConfig().getInstance().getMethodCnNameById(n),
	a="current";s.size()>0&&(i.find("dd").removeClass(a).end(),s.addClass(a),o=s.parents("li").addClass("current").show(),
					r.removeClass("current").eq(o.index()).addClass("current"))});
		var T=new caipiaogame.Tip({cls:"j-ui-tip-b j-ui-tip-showrule"});$("#J-balls-main-panel").on("mouseover",".pick-rule, .win-info",function(){var t=$(this),n=e.getCurrentGame().getCurrentGameMethod().getId(),r=e.getCurrentGame().getGameConfig().getInstance().getMethodById(n),i=t.hasClass("pick-rule")?r.bet_note:r.bonus_note;T.setText(i),T.show(T.getDom().width()/2*-1+t.width()/2,T.getDom().height()*-1-20,t)}),$("#J-balls-main-panel").on("mouseleave",".pick-rule, .win-info",function(){T.hide()}),$("#J-balls-main-panel").on("click",".pick-rule, .win-info",function(){return!1});var N=0;e.getCurrentGame().addEvent("afterSwitchGameMethod",function(t,n){var n=e.getCurrentGame().getCurrentGameMethod().getId(),r=e.getCurrentGameStatistics().getMoneyUnit(),i=e.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(n,r),s=e.getCurrentGame().getGameConfig().getInstance().getPrizeById(n),o=e.getCurrentGame().getGameConfig().getInstance().getMaxPrizeGroup(),u=e.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length,a=e.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[u-1].prize_group,f=0,l=!1;N=Number(s.prize),l=s.display_prize,a>o?f=N*r*o/a:f=N*r,e.getCurrentGameStatistics().getMultipleDom().setMaxValue(i),f=f.toFixed(2),l?($("#J-method-prize").show(),$("#J-method-prize").find("span").html(caipiaogame.util.formatMoney(f))):$("#J-method-prize").hide(),e.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend()}),e.getCurrentGameTypes().addEvent("endShow",function(){this.changeMode(e.getCurrentGame().getGameConfig().getInstance().getDefaultMethodId())}),$("#J-add-order").click(function(){var t=e.getCurrentGameStatistics().getResultData();if(!t.mid||t.amount<"0.02")return;e.getCurrentGameOrder().add(t)}),$("#J-fast-submit").click(function(){var t=e.getCurrentGameStatistics().getResultData();if(!t.mid||t.amount<"0.02")return;e.getCurrentGameOrder().fastAdd(t),e.getCurrentGameSubmit().fastSubmitData(f)}),e.getCurrentGameStatistics().addEvent("afterUpdate",function(t,n,r){var i=this,s=$("#J-add-order"),o=$("#J-fast-submit"),u=$("#J-button-bet-allin"),f=Number($.trim($("#J-balls-statistics-balance").text().replace(/,/g,""))),l=e.getCurrentGame().getGameConfig().getInstance().getMaxPrizeGroup(),c=e.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length,h=e.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[c-1].prize_group;if(n>0){if(r>="0.02"){s.add(o).removeClass("disabled");var p=i.getPrizeGroupRate()||0;i.setRebate(r,p),a.hide()}else a.show(a.getDom().width()/2*-1+s.width()/2,a.getDom().height()*-1-20,s),s.add(o).addClass("disabled"),i.setRebate(0);f>0&&u.removeClass("btn-bet-allin-disable")}else s.add(o).addClass("disabled"),i.setRebate(0),a.hide(),u.addClass("btn-bet-allin-disable");var d=N*Number(i.getMoneyUnit());h>l&&(d=N*Number(i.getMoneyUnit())*l/h),d=d.toFixed(2),$("#J-method-prize").find("span").html(caipiaogame.util.formatMoney(d))});var C=$("#J-panel-order-list-cont"),k;C.jScrollPane(),k=C.data("jsp"),e.getCurrentGameOrder().addEvent("afterChangeLotterysNum",function(e,t){var n=this,r=$("#J-submit-order"),i=$("#J-trace-switch"),s=e.data.orderData,o=!1,u=$(".J-cart-empty");if(t>0){for(var a=0;a<s.length;a++)s[a]["moneyUnit"]==.001||s[a]["moneyUnit"]==5e-4?o=!0:"";o?(r.removeClass("disabled"),i.addClass("disabled")):r.add(i).removeClass("disabled"),u.hide(),k.reinitialise()}else r.add(i).addClass("disabled"),u.show()}),$("body").on("click",".remove-error",function(){e.getCurrentGame().getCurrentGameMethod().removeOrderError()}).on("click",".remove-same",function(){e.getCurrentGame().getCurrentGameMethod().removeOrderSame()}).on("click",".remove-all",function(){e.getCurrentGame().getCurrentGameMethod().removeOrderAll()}),e.getCurrentGameStatistics().setMultiple(e.getCurrentGame().getGameConfig().getInstance().getDefaultMultiple()),e.getCurrentGameStatistics().setMoneyUnitDom(e.getCurrentGame().getGameConfig().getInstance().getDefaultCoefficient()),$("body").on("click","#J-submit-order",function(){e.getCurrentGameTrace().deleteTrace(),e.getCurrentGameSubmit().submitData(f)}),$("#J-button-bet-allin").click(function(t){var n=$(this),r=.01,i=Number($.trim($("#J-balls-statistics-balance").text().replace(/,/g,""))),s=e.getCurrentGameStatistics(),o=s.getResultData(),u=o.onePrice*o.num*r,a;t.preventDefault();if(n.hasClass("btn-bet-allin-disable"))return;a=Math.floor(i/u),a>0&&(s.getMoneyUnitDom().setValue(r),s.getMultipleDom().setValue(a))});var L=new caipiaogame.Tip({cls:"j-ui-tip-t"});$("#J-button-bet-allin").mouseover(function(){var e=$(this);L.setText("根据可用余额自动计算您所选号码的最大可投倍数(不超过最高奖金限额）"),L.show(L.getDom().width()/2*-1+e.width()/2,e.height()+20,e)}),$("#J-button-bet-allin").mouseleave(function(){L.hide()}),$("#J-trace-switch").click(function(){var t=e.getCurrentGameOrder().orderData,n=!1;for(var r=0;r<t.length;r++)t[r].moneyUnit=="0.001"||t[r].moneyUnit=="0.0005"?n=!0:"";return n?!1:($("#J-trace-statistics-balance").html($("[data-user-account-balance]").html()),e.getCurrentGameTrace().show(),!1)}),$("#J-trace-panel").on("click",".closeBtn",function(){e.getCurrentGameTrace().hide(),e.getCurrentGameTrace().deleteTrace()}),$("#J-button-trace-confirm").click(function(){e.getCurrentGameTrace().getIsTrace()&&(e.getCurrentGameTrace().hide(),e.getCurrentGameSubmit().submitData(f),e.getCurrentGameTrace().deleteTrace())}),e.getCurrentGameSubmit().addEvent("beforeSend",function(e,t){var n=t.win.dom.find(".pop-control"),r=n.find("a.confirm"),i=n.find("a.cancel");r.addClass("disabled"),r.text("提交中..."),t.win.hideCancelButton()}),e.getCurrentGameSubmit().addEvent("afterSubmit",function(e,t){c.start(),$(".j-money-rest").trigger("click")}),$("#onPlay").click(function(){l?(l=!1,$.cookie("gameONPlay","0",{expires:365}),$(this).find("i").removeClass("icon-16").addClass("icon-17")):(l=!0,$.cookie("gameONPlay","1",{expires:365}),$(this).find("i").removeClass("icon-17").addClass("icon-16"))}),$("#J-panel-gameTypes").find("li>.title").click(function(e){var t=$(this),n=t.parent();n.hasClass("gametypes-menu-caibuchu")?($(".number-section-balls-main-panel").removeClass("a-flipinX"),$(".number-section-balls-main-panel").addClass("a-flipoutX "),setTimeout(function(){$(".number-section-balls-main-panel").addClass("balls-main-panel-anti"),$(".number-section-balls-main-panel").removeClass("a-flipoutX"),$(".number-section-balls-main-panel").addClass("a-flipinX")},1800)):$(".number-section-balls-main-panel").removeClass("balls-main-panel-anti")});var A=new caipiaogame.Tab({par:"#J-list-history-panel",triggers:".title li",panels:".content",eventType:"click"}),O=0,M={},_={},D=[],P=$("#J-tbody-historys-bets"),H=$("#J-tbody-historys-traces"),B='<tr class="<#=rowclass#>"><td><#=checkbox#></td><td><#=gamename#></td><td><#=title#></td><td><#=issue#></td><td><#=winning_number#></td><td><#=display_bet_number#></td><td><#=money#></td><td><#=prize#></td><td><#=status_desc#></td><td><#=mode#></td></tr>',j='<tr class="<#=rowclass#>"><td><#=gamename#></td><td><#=title#></td><td><#=startnumber#></td><td><#=progress#></td><td><#=amount#></td><td><#=prize#></td><td><#=iswinstop#></td><td><#=status_desc#></td><td><#=mode#></td></tr>',F=function(e){var t=0;$.each($(".cancelCheckbox"),function(e){$(this).is(":checked")&&t++}),t>0&&!e?$("#j-all-cancel").removeClass("disabled"):$("#j-all-cancel").addClass("disabled")},I=function(e){var t,n=[],r,i=0,s=e.length;for(i=s-1;i>=0;i--)t=e[i],M[t.id]?M[t["id"]]["status"]!=t["status"]&&$(q(t)).replaceAll(P.find(".row-data-"+t.id)):$(q(t)).prependTo(P),M[t.id]=t},q=function(e){var t=B,n=[];return checkbtn=[],mode=[],e.display_bet_number.length>10&&(e.display_bet_number=e.display_bet_number.substr(0,10)+"..."),e.winning_number=e.winning_number?e.winning_number:"",n.push("row-data-"+e.id),n.push("row-status-"+e.status),e["status"]==0?(checkbtn.push('<input type="checkbox" class="cancelCheckbox" data-id="'+e.id+'">'),mode.push('<a class="btn btn-mini " target="_blank" href="/boughts/'+e.id+'/view/">详情</a> <a class="btn btn-mini warning cancelProject"  data-id="'+e.id+'" >撤单</a>')):mode.push('<a class="btn btn-mini " target="_blank" href="/boughts/'+e.id+'/view/">详情</a>'),t=t.replace(/<#=winning_number#>/g,'<span class="cls-prizeballs">'+e.winning_number+"</span>"),t=t.replace(/<#=gamename#>/g,'<span class="cls-gamename">'+e.lottery+"</span>"),t=t.replace(/<#=issue#>/g,'<span class="cls-number">'+e.issue+"</span>"),t=t.replace(/<#=title#>/g,'<span class="cls-method">'+e.title+"</span>"),t=t.replace(/<#=money#>/g,'<span class="cls-money">'+e.amount+"</span>"),t=t.replace(/<#=prize#>/g,'<span class="cls-prize">'+caipiaogame.util.formatMoney(e.prize)+"</span>"),t=t.replace(/<#=display_bet_number#>/g,'<span class="cls-balls">'+e.display_bet_number+"</span>"),t=t.replace(/<#=status_desc#>/g,'<span class="cls-status">'+e.status_desc+"</span>"),t=t.replace(/<#=commission#>/g,'<span class="cls-commission">'+e.commission+"</span>"),t=t.replace(/<#=id#>/g,e.id),t=t.replace(/<#=rowclass#>/g,n.join(" ")),t=t.replace(/<#=checkbox#>/g,checkbtn.join("")),t=t.replace(/<#=mode#>/g,mode.join("")),t},R=function(e){var t=_,n,r,i=[],s,o=0,u=e.length;for(o=u-1;o>=0;o--)n=e[o],r=t[n.id],r?(r["id"]!=n["id"]||r["status"]!=n["status"])&&$(U(n)).replaceAll(H.find(".row-data-"+n.id)):($(U(n)).prependTo(H),t[n.id]=n)},U=function(e){var t=j,n=[],r=[];return e["status"]==0?r.push('<a class="btn btn-mini " target="_blank" href="/tasks/'+e.id+'/view/">详情</a> <a class="btn btn-mini warning cancelProject"  data-id="'+e.id+'" >撤单</a>'):r.push('<a class="btn btn-mini " target="_blank" href="/tasks/'+e.id+'/view/">详情</a>'),n.push("row-data-"+e.id),t=t.replace(/<#=gamename#>/g,'<span class="cls-gamename">'+e.lottery+"</span>"),t=t.replace(/<#=title#>/g,'<span class="cls-method">'+e.title+"</span>"),t=t.replace(/<#=startnumber#>/g,'<span class="cls-startnumber">'+e.start_issue+"</span>"),t=t.replace(/<#=progress#>/g,'<span class="cls-progress">'+e.finished_issues+"/"+e.total_issues+"</span>"),t=t.replace(/<#=amount#>/g,'<span class="cls-amount">'+caipiaogame.util.formatMoney(e.amount)+"</span>"),t=t.replace(/<#=prize#>/g,'<span class="cls-balls">'+caipiaogame.util.formatMoney(e.prize)+"</span>"),t=t.replace(/<#=iswinstop#>/g,'<span class="cls-iswinstop">'+(e.stop_on_won="是")+"</span>"),t=t.replace(/<#=status_desc#>/g,'<span class="cls-status">'+e.status_desc+"</span>"),t=t.replace(/<#=rowclass#>/g,n.join(" ")),t=t.replace(/<#=id#>/g,e.id),t=t.replace(/<#=mode#>/g,r.join("")),t};c.addEvent("afterSuccess",function(e,t){if(t!="")switch(O){case 0:I(t);break;case 1:R(t);break;default:}}),c.addEvent("afterError",function(e,t,n){}),A.addEvent("afterSwitch",function(e,t){t==0&&(c.pause(),c.defConfig.url="/boughts/mini-window",c.start(),O=0,$("#j-all-cancel").show()),t==1&&(c.pause(),c.defConfig.url="/tasks/mini-window",c.start(),O=1,$("#j-all-cancel").hide())}),c.start(),$("#J-list-history-panel").on("click",".cancelProject",function(){var t=$(this).attr("data-id"),n=caipiaogame.Message.getInstance(),r=e.getCurrentGameMessage(),i;O==0?i='<i class="ico-waring"></i><p class="pop-text">你确定要撤单嘛？如果您是追号只会撤销本期哦！<br/>追号请进入<a href="/tasks" target="_blank">追号记录</a>里撤单</p>':i='<i class="ico-waring"></i><p class="pop-text">你确定要终止本次追号嘛？</p>';var s={title:"确认",content:i,isShowMask:!0,cancelIsShow:!0,confirmIsShow:!0,cancelButtonText:"取消",confirmButtonText:"确认",confirmFun:function(){var e=this,n=O==0?"/boughts/"+t+"/drop":"/tasks/"+t+"/stop";$.ajax({url:n,dataType:"JSON",success:function(e){e.succeed||r.show({type:"errorTip",msg:e.msg,data:{tplData:{msg:e.msg}}}),c.start()}}),e.hide()},cancelFun:function(){this.hide()}};n.show(s)}),$("#J-list-history-panel").on("click",".cancelCheckbox",function(){F()}),$("#j-all-cancel").on("click",function(){D=[];if($(this).hasClass("disabled"))return!1;$.each($(".cancelCheckbox"),function(e){$(this).is(":checked")&&D.push($(this).attr("data-id"))});var t=caipiaogame.Message.getInstance(),n=e.getCurrentGameMessage(),r={title:"确认",content:'<i class="ico-waring"></i><p class="pop-text">你确定要撤单么？如果您是追号只会撤销本期哦！<br/>追号请进入<a href="/tasks" target="_blank">追号记录</a>里撤单</p>',isShowMask:!0,cancelIsShow:!0,confirmIsShow:!0,cancelButtonText:"取消",confirmButtonText:"确认",confirmFun:function(){var e=this;$.ajax({url:"/boughts/"+D.join()+"/batch-drop",dataType:"JSON",success:function(e){e.succeed||n.show({type:"errorTip",msg:e.msg,data:{tplData:{msg:e.msg}}}),F(1),c.start()}}),e.hide()},cancelFun:function(){this.hide()}};t.show(r)})})